<script src="../../js/inner/all.js"></script>
<link rel="stylesheet" href="../../css/find.css">
<!-- ************ID用于刷新页面***********************-->
<input type="hidden" id="demandInfoId" name="demandInfoId">
<div class="expert-body">
	<h4 class="m-crumb">当前位置：<span>项目管理 -总页面</span></h4>
	<div class="manage_detail">

		<div class="row clearfix">
		
		<div id="tabs">
		  <ul>
		    <li><a href="#tabs-demandInfo">项目机会</a></li>
		    <li><a href="#tabs-bid">投标</a></li>
		    <li><a href="#tabs-contract">合同</a></li>
		  </ul>
		  <div class="table-box">
		  <div id="tabs-demandInfo">
		    <table class="table table-bordered" id="demandInfoTable">
		    	<thead>
					<tr>
						<th>项目名称</th>
						<th>客户名称</th>
						<th>项目类型</th>
						<th>状态</th>
						<th>操作</th>
					</tr>
				</thead>
				<tbody>
					
				</tbody>
			</table>
			<div style="align:center">项目机会追踪</div>
		    <table class="table table-bordered" id="demandRecordTable">
		    	<thead>
					<tr>
						<th>我方参与人员</th>
						<th>客户参与人员</th>
						<th>开始时间</th>
						<th>结束时间</th>
						<th>沟通方式</th>
						<th>会议地址</th>
						<th>状态</th>
						<th>操作</th>
					</tr>
				</thead>
				<tbody>
				</tbody>
			</table>
			
		  </div>
		  <div id="tabs-bid">
		<h3 align="right">
			<a class="btn btn-default btn-add" data-toggle="modal" data-target="#bidModal" onclick="preAdd_bid()"><i class="icon fa fa-plus"></i>添加</a>
			<!-- <a class="btn btn-default btn-add" data-toggle="modal" onclick="back('toBid')">返回</a>  -->
		</h3>
		    <table class="table table-bordered" id="bidTable">
					<thead>
						<tr role="row">
							<th>客户名称</th>
							<th>投标时间</th>
							<th>中标时间</th>
							<th>保证金是否返还</th>
							<th>保证金</th>
							<th>操作</th>
						</tr>
					</thead>
					<tbody>
					
					</tbody>
				</table>
		  </div>
		  <div id="tabs-contract">
		<h3 align="right"> <a class="btn btn-default btn-add" data-toggle="modal" onclick="preAdd_contract()" data-target="#contractModal" ><i class="icon fa fa-plus"></i>添加</a></h3>
		  	<table class="table table-bordered" id="contractTable">
					<thead>
						<tr role="row">
							<th>合同号</th>
							<th>合同名称</th>
							<th>合同金额</th>
							<th>头款时间</th>
							<th>中款时间</th>
							<th>尾款时间</th>
							<th>签订时间</th>
							<th>操作</th>
						</tr>
					</thead>
					<tbody>
					</tbody>
				</table>
				回款记录
			    <table class="table table-bordered" id="salesBackTable">
			    	<thead>
						<tr>
							
							<th style="width:300px">项目名称</th>
							<th style="width:100px">项目负责人</th>
							<th style="width:100px">开始时间</th>
							<th style="width:100px">结束时间</th>
							<th style="width:200px">回款时间</th>
							<th style="width:200px">回款金额</th>
							<th>描述</th>
						</tr>
					</thead>
					<tbody>
					</tbody>
				</table>
		  </div>
	</div>
		
</div>


</div>
</div>
</div>

<div id="demandInfoModal" class="modal fade add-modal" tabindex="-1" role="dialog">
		<div class="modal-dialog" role="document">
			<div class="modal-content" style="width:600px;">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
					<h4 id="demandRecordTitle" class="modal-title">添加信息</h4>
				</div>
				<div class="modal-body">
					<form id="demandInfoForm">
						<!-- *******用于修改的id********* -->
						<input type="hidden" name="id">
						<input type="hidden" name="status">
						<input type="hidden" name="createTime">
						<!-- 客户Id -->
						<input type="hidden" name="customerId">
						
						<div class="form-box">
							<span class="tit"><i class="icon fa fa-asterisk red smaller-70"></i>项目名称：</span>
							<input type="text" class="form-control" name="projectName" placeholder="请输入项目名称"
								required maxlength="100" />
						</div>
						<div class="ui-widget form-box">
							<span class="tit"><i class="icon fa fa-asterisk red smaller-70"></i>客户名称：</span> <!-- 自动补全的 -->
  							<label for="editCusName" style="display:none"></label>
  								<input id="editCusName" class="form-control" name="customerName" required>
						</div>
						<div class="form-box">
							<span class="tit"><i class="icon fa fa-asterisk red smaller-70"></i>联系人电话：</span>
							<input type="text" class="form-control isPhone" name="telephone"
								required maxlength="20"/>
						</div>
						<div class="form-box">
							<span class="tit"><i class="icon fa fa-asterisk red smaller-70"></i>项目类型：</span>
							<select name="projectType" class="form-control" required>
								
							</select>
						</div>
						<div class="form-box">
							<span class="tit"><i class="icon fa fa-asterisk red smaller-70"></i>需求描述：</span>
							<textarea rows="2" class="form-control" name="content" placeholder="请输入需求描述"
							required maxlength="1000" ></textarea>
						</div>
						<div class="form-box">
							<span class="tit"><i class="icon fa fa-asterisk red smaller-70"></i>机会联系人：</span>
							<input type="text" class="form-control" name="projectClue" placeholder="请输入机会联系人" required/>
						</div>
						<div class="form-box">
							<span class="tit"><i class="icon fa fa-asterisk red smaller-70"></i>负责人：</span>
							<input type="text" class="form-control" name="leader" placeholder="请输入负责人姓名"
								 required maxlength="50"/>
						</div>
						<div class="form-box">
							<span class="tit">备注：</span> 
							<textarea name="descn" class="form-control" placeholder="请输入备注"
								maxlength="1000"></textarea>
						</div>
						<span id="addErrorMessage" style="color:red"></span>
					</form>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-primary" id="demandInfo_saveBtn"><i class="icon fa fa-save"></i> 保存</button>
					<button type="button" class="btn btn-default" data-dismiss="modal" id="demandInfo_cancel"><i class="icon fa fa-times"></i> 取消</button>
				</div>
			</div>
		</div>
</div>

<div id="demandRecordModal" class="modal fade add-modal" tabindex="-1" role="dialog">
		<div class="modal-dialog" role="document">
			<div class="modal-content" style="width:600px;">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
					<h4 class="modal-title">查看项目机会追踪信息</h4>
				</div>
				<div class="modal-body">
					<form id="demandRecordForm">
						<input type="hidden" name="id">
						<input type="hidden" name="demandInfoId" id="demandInfoId">
						<input type="hidden" name="createTime">
						
						<div class="form-box">
							<span class="tit"><i class="icon fa fa-asterisk red smaller-70"></i>我方参与人员：</span> 
							<input type="text" class="form-control" name="partyaPerson"  required placeholder="请输入我方参与人员,逗号隔开"
								required maxlength="100"/>
						</div>
						<div class="form-box">
							<span class="tit"><i class="icon fa fa-asterisk red smaller-70"></i>客户参与人员：</span> 
							<input type="text"class="form-control" name="partybPerson" required  placeholder="请输入客户参与人员,逗号隔开"
								required maxlength="100"/>
						</div>
						<div class="form-box">
							<span class="tit"><i class="icon fa fa-asterisk red smaller-70"></i>客户联系人：</span> 
							<input type="text"class="form-control" name="partyName" required  placeholder="请输入客户联系人" maxlength="100"/>
						</div>
						<div class="form-box">
							<span class="tit"><i class="icon fa fa-asterisk red smaller-70"></i>客户联系方式：</span> 
							<input type="text"class="form-control" name="customerPhone" required  placeholder="请输入客户联系方式" maxlength="100"/>
						</div>
						<div class="form-box">
							<span class="tit"><i class="icon fa fa-asterisk red smaller-70"></i>沟通方式：</span>
							<select name="communicationType" class="form-control">
								<option value="电话">电话</option>
								<option value="会议">会议</option>
							</select>
						</div>
						<div class="form-box" >
						<span class="tit"><i class="icon fa fa-asterisk red smaller-70"></i>开始时间：</span> 
							  <input name="startTime" id="startTime_edit" class="form-control" size="16" value="" placeholder="请选择开始时间"
								 required type="text">
                		</div>
						<div class="form-box">
							<span class="tit"><i class="icon fa fa-asterisk red smaller-70"></i>结束时间：</span> 
							  <input name="endTime" id="endTime_edit" class="form-control" size="16" value="" placeholder="请选择结束时间"
								 required type="text">
						</div>
						<div class="form-box">
							<span class="tit"><i class="icon fa fa-asterisk red smaller-70"></i>沟通地点：</span> 
							<input type="text" class="form-control" name="meetingAdress"  required  maxlength="100" placeholder="请输入沟通地点"/>
						</div>
						<div class="form-box">
							<span class="tit"><i class="icon fa fa-asterisk red smaller-70"></i>需求描述：</span>
							<textarea rows="2" class="form-control" name="content" required  maxlength="1000" placeholder="请输入需求描述"></textarea>
						</div>
						<div class="form-box">
							<span class="tit">机会进展文件：</span>
							<a href="javascript:;" class="a-upload"><input id="demandRecordFile" type="file" name="file" multiple onchange ="oneupload(null,null,'demandRecordFile','demandRecordFiles')"/>点击上传文件</a>
						</div>
						<div id="demandRecordFiles">
						</div>
						<div class="form-box">
							<span class="tit"><i class="icon fa fa-asterisk red smaller-70"></i>状态：</span> 
							<select name="status" class="form-control">
								<option value="洽谈中">洽谈中</option>
								<option value="已签订">已签订</option>
								<option value="机会终止">机会终止</option>
							</select>
						</div>
						<div class="form-box">
							<span class="tit">备注：</span>
							<textarea rows="2" class="form-control" name="descn"  maxlength="1000" placeholder="请输入备注"></textarea>
						</div>
						<span id="editErrorMessage" style="color:red"></span>
					</form>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-primary" id="demandRecord_saveBtn"><i class="icon fa fa-save"></i> 保存</button>
					<button type="button" class="btn btn-default" id="demandRecord_cancel" data-dismiss="modal"><i class="icon fa fa-times"></i> 取消</button>
				</div>
			</div>
		</div>
</div>

<div id="bidModal" class="modal fade add-modal" tabindex="-1" role="dialog">
		<div class="modal-dialog" role="document">
			<div class="modal-content" style="width: 600px;">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
					<h4 id="bidTitle" class="modal-title">新增信息</h4>
				</div>
				<div class="modal-body">
					<form id="bidForm" enctype="multipart/form-data">
						<input type="hidden" name="demandInfoId">
						<input type="hidden" name="id">
						
						<div class="form-box">
							<span class="tit"><i class="icon fa fa-asterisk red smaller-70"></i>项目名称：</span> 
  							<input class="form-control required" name="projectName" class="form-control">
						</div>
						<div class="form-box">
							<span class="tit"><i class="icon fa fa-asterisk red smaller-70"></i>客户名称：</span>
							<label for="bid_customerName" style="display:none"></label>
  								<input type="text" id="bid_customerName" class="form-control" name="customerName"  required placeholder="请输入客户名称">
						</div>
						<div class="form-box">
							<span class="tit"><i class="icon fa fa-asterisk red smaller-70"></i>保证金：</span>
							<input type="text" class="form-control required isDeposit" name="deposit" placeholder="请输入保证金"
								  maxlength="10"/>元
						</div>
						<div class="form-box">
							<span class="tit">保证金是否返还：</span>
						    是<input type="radio"  name="needReturn" value="1" checked/>
						    否<input type="radio" name="needReturn" value="0"/>
						</div>
						
						<div class="form-box">
							<span class="tit">投标文件：</span>
							<a href="javascript:;" class="a-upload"><input id="bidFile" type="file" name="file" multiple onchange ="oneupload(null,null,'bidFile','bidFiles')"/>点击上传文件</a>
						</div>
						<div id="bidFiles">
						</div>
						
						<div class="form-box">
							<span class="tit"><i class="icon fa fa-asterisk red smaller-70"></i>投标时间：</span>
							<input type="text" class="form-control datepicker required" name="bidDate" id="bidDate" placeholder="请选择投标时间"/>
						</div>
						<div class="form-box">
							<span class="tit"><i class="icon fa fa-asterisk red smaller-70"></i>中标时间：</span>
							<input type="text" class="form-control datepicker required" name="winBidDate" id="winBidDate" placeholder="请选择中标时间"/>
						</div>
						<div class="form-box">
							<span class="tit">备注：</span>
							<textarea rows="2" class="form-control" name="descn" placeholder="请输入备注" maxlength="200"></textarea>
						</div>
						
						<span id="errorMessage_bid" style="color:red"></span>
					</form>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-primary" id="bid_saveBtn" onclick="saveBid()"><i class="icon fa fa-save"></i> 保存</button>
					<button type="button" class="btn btn-default" data-dismiss="modal" id="bid_cancel"><i class="icon fa fa-times"></i> 取消</button>
				</div>
			</div>
		</div>
	</div>
	
	<div id="contractModal" class="modal fade add-modal" tabindex="-1" role="dialog" style="overflow:scroll">
		<div class="modal-dialog" role="document">
			<div class="modal-content" style="width: 600px;">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
					<h4 id="contractTitle" class="modal-title">新增信息</h4>
				</div>
				<div class="modal-body">
					<form id="contractForm">
						<input type="hidden" name="id">
						<input type="hidden" name="demandInfoId">
						<input type="hidden" name="approverId">
						
					
						<div class="form-box">
							<span class="tit"><i class="icon fa fa-asterisk red smaller-70"></i>合同类型：</span>
							<label class="radio-inline" id="contractP">
								<input type="radio" onclick="selectContractType('普通合同')" checked id="redioP" value="普通合同" name="type" style="margin-left:-20px;">
								普通合同
							</label>
							<label class="radio-inline" id="contractT">
								<input type="radio" onclick="selectContractType('特殊合同')" id="redioT" value="特殊合同" name="type" style="margin-left:-20px;">
								特殊合同
							</label>
						</div>
						<div class="form-box" id="approver_div" >
							<span class="tit"><i class="icon fa fa-asterisk red smaller-70"></i>审批人：</span>
							<select name="approver" class="form-control" onchange="setApproverId();">
							</select>
						</div>
						<div class="form-box">
							<span class="tit"><i class="icon fa fa-asterisk red smaller-70"></i>合同编号：</span>
							<input type="text" name="contractNumber" class="form-control required" placeholder="请输入合同编号"/>
						</div>
						<div class="form-box">
							<span class="tit"><i class="icon fa fa-asterisk red smaller-70"></i>合同名称：</span>
							<input type="text" name="name" class="form-control required" placeholder="请输入合同名称"/>
						</div>
						<div class="form-box">
							<span class="tit"><i class="icon fa fa-asterisk red smaller-70"></i>合同主体：</span>
							<input type="text" name="contractSubject" class="form-control required" placeholder="请输入合同主体"/>
						</div>
						<!--文件上传需要添加 -->
						<div class="form-box">
							<span class="tit"><i class="icon fa fa-asterisk red smaller-70"></i>合同文件：</span>
							<a href="javascript:;" class="a-upload"><input id="contractFile" type="file" name="file" multiple onchange ="oneupload(null,null,'contractFile','contractFiles')"/>点击上传文件</a>
						</div>
						<div id="contractFiles">
						
						</div>
						<div class="form-box">
							<span class="tit"><i class="icon fa fa-asterisk red smaller-70"></i>合同金额：</span>
							<input type="text" class="form-control required isDeposit" name="contractAmount" placeholder="请输入合同金额" maxlength="12"/>元
						</div>
						<div class="form-box">
							<span class="tit"><i class="icon fa fa-asterisk red smaller-70"></i>头款时间：</span> 
							<input name="payDateOne" class="form-control datepicker required" size="16"  placeholder="请选头款时间时间"  type="text">
						</div>
						<div class="form-box">
							<span class="tit"><i class="icon fa fa-asterisk red smaller-70"></i>中款时间：</span> 
							<input name="payDateTwo" class="form-control datepicker required" size="16"  placeholder="请选中款时间时间"  type="text">
						</div>
						<div class="form-box">
							<span class="tit"><i class="icon fa fa-asterisk red smaller-70"></i>尾款时间：</span> 
							<input name="payDateThree" class="form-control datepicker required" size="16"  placeholder="请选尾款时间时间"  type="text">
						</div>
						<div class="form-box">
							<span class="tit"><i class="icon fa fa-asterisk red smaller-70"></i>签订时间：</span> 
							<input name="registerDate" class="form-control datepicker required" size="16"  placeholder="请选择签订时间" type="text">
						</div>
						<div class="form-box">
							<span class="tit"><i class="icon fa fa-asterisk red smaller-70"></i>初稿成果时间：</span> 
							<input name="resultDateCg" class="form-control datepicker" size="16" value="" placeholder="请选初稿成果时间"
								 required type="text">
						</div>
						<div class="form-box">
							<span class="tit"><i class="icon fa fa-asterisk red smaller-70"></i>终稿成果时间：</span> 
							<input name="resultDateZg" class="form-control datepicker" size="16" value="" placeholder="请选终稿成果时间"
								 required type="text">
						</div>
						<div class="form-box">
							<span class="tit"><i class="icon fa fa-asterisk red smaller-70"></i>评审时间：</span>
							<input name="reviewDate" class="form-control datepicker required" size="16"  placeholder="请选择评审时间" type="text">
               			</div>
						<!--文件上传需要添加 -->
						<div class="form-box">
							<span class="tit">评审文件：</span>
							<a href="javascript:;" class="a-upload"><input id="reviewFile" type="file" name="file" multiple onchange ="oneupload(null,null,'reviewFile','reviewFiles')"/>点击上传文件</a>
						</div>
						<div id="reviewFiles">
						
						</div>
						<div class="form-box">
							<span class="tit">备注：</span>
							<textarea rows="2" class="form-control" name="descn" placeholder="请输入备注" maxlength="200"></textarea>
						</div>
						<span id="errorMessage_contract" style="color:red"></span>
					</form>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-primary" onclick="saveContract()" id="contract_saveBtn"><i class="icon fa fa-save"></i> 保存</button>
					<button type="button" class="btn btn-default" id="contract_cancel" data-dismiss="modal"><i class="icon fa fa-times"></i> 取消</button>
				</div>
			</div>
		</div>
	</div>
	
	
	
	<div id="delModal" class="modal fade del-modal" tabindex="-1" role="dialog">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
					<h4 class="modal-title">删除信息</h4>
				</div>
				<div class="modal-body">
					<i class="del-warn"></i>确定删除吗？删除后将无法恢复！
				</div>
				<div class="modal-footer">
				<button type="button" class="btn btn-primary" id="delBtn" >确定</button><!-- onclick="doDel()" -->
					<button type="button" class="btn btn-default" data-dismiss="modal"><i class="icon fa fa-times"></i> 取消</button>
				</div>
			</div>
		</div>
	</div>
